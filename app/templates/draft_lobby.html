{% extends "base_arena.html" %}

{% block title %}Draft Lobby - ManaForge{% endblock %}

{% block content %}
<div class="py-12 px-4">
    <div class="max-w-6xl mx-auto">
        <div class="text-center mb-12">
            <h1 class="font-magic text-4xl md:text-5xl font-bold text-arena-accent mb-4">
                &#x1F4E6; Draft Lobby
            </h1>
            <p class="text-xl text-arena-text-dim">
                Create or join a draft to build your deck.
            </p>
        </div>

        <div class="arena-card rounded-xl mb-8">
            <div class="p-8">
                <h2 class="font-magic text-3xl font-bold text-arena-accent mb-2 text-center">Create a Draft Room</h2>
                <div class="max-w-2xl mx-auto space-y-6">
                    <div class="relative">
                        <input
                            type="text"
                            id="roomName"
                            placeholder="Enter Draft Room Name..."
                            value=""
                            class="w-full px-6 py-4 bg-arena-surface border border-arena-accent/30 rounded-lg text-arena-text placeholder:text-arena-muted focus:border-arena-accent focus:ring-2 focus:ring-arena-accent/20 focus:outline-none transition-all duration-200 text-center text-lg font-semibold"
                        >
                        <button
                            onclick="generateRandomRoomName()"
                            class="absolute left-4 top-1/2 transform -translate-y-1/2 text-arena-accent hover:text-arena-accent-light transition-colors"
                            title="Generate random name"
                        >
                            ðŸŽ²
                        </button>
                    </div>
                    <div>
                        <label for="draftMode" class="block text-arena-text-dim mb-2">Draft Mode</label>
                        <select id="draftMode" class="w-full px-6 py-4 bg-arena-surface border border-arena-accent/30 rounded-lg text-arena-text focus:border-arena-accent focus:ring-2 focus:ring-arena-accent/20 focus:outline-none transition-all duration-200">
                            <option value="set">Set Booster Draft</option>
                            <option value="sealed">Sealed Deck</option>
                            <option value="cube">Cube Draft</option>
                        </select>
                    </div>
                    <div id="set-options">
                        <label for="setName" class="block text-arena-text-dim mb-2">Set Name</label>
                        <input type="text" id="setName" placeholder="Search for a set (e.g., Dominaria United)" class="w-full px-6 py-4 bg-arena-surface border border-arena-accent/30 rounded-lg text-arena-text placeholder:text-arena-muted focus:border-arena-accent focus:ring-2 focus:ring-arena-accent/20 focus:outline-none transition-all duration-200">
                        <div id="set-suggestions" class="mt-2"></div>
                    </div>
                    <div id="cube-options" class="hidden space-y-4">
                        <div>
                            <label for="cubeUrl" class="block text-arena-text-dim mb-2">CubeCobra List URL</label>
                            <input type="text" id="cubeUrl" placeholder="https://cubecobra.com/cube/list/yourcube" class="w-full px-6 py-4 bg-arena-surface border border-arena-accent/30 rounded-lg text-arena-text placeholder:text-arena-muted focus:border-arena-accent focus:ring-2 focus:ring-arena-accent/20 focus:outline-none transition-all duration-200">
                            <p class="text-xs text-arena-muted mt-1">We will automatically fetch the MTGO export from CubeCobra using the provided list or download URL.</p>
                        </div>
                        <div>
                            <label for="cubeList" class="block text-arena-text-dim mb-2">Import Cube List</label>
                            <textarea id="cubeList" rows="5" placeholder="Optional: paste a plain text list (e.g., MTGO export) if you do not have a URL." class="w-full px-6 py-4 bg-arena-surface border border-arena-accent/30 rounded-lg text-arena-text placeholder:text-arena-muted focus:border-arena-accent focus:ring-2 focus:ring-arena-accent/20 focus:outline-none transition-all duration-200"></textarea>
                            <p class="text-xs text-arena-muted mt-1">Paste an MTGO-style list: we will parse it and create 15-card packs.</p>
                        </div>
                    </div>
                    <input type="hidden" id="setCode">
                    <input type="hidden" id="setFullName">
                    <button onclick="createDraftRoom()" class="arena-button w-full py-4 px-8 rounded-lg font-semibold text-xl transition-all duration-300 group">
                        Create Room
                    </button>
                </div>
            </div>
        </div>

        <div class="arena-card rounded-xl">
            <div class="p-8">
                <h2 class="font-magic text-3xl font-bold text-arena-accent mb-2 text-center">Join a Draft Room</h2>
                <div id="draft-room-list" class="space-y-4">
                    <!-- Draft rooms will be loaded here -->
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', path='js/draft-lobby.js') }}"></script>
{% endblock %}
